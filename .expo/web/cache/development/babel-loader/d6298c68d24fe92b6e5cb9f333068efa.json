{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\Craig133Mhz\\\\Desktop\\\\programacion\\\\REACT NATIVE\\\\MyTinerary Mobile\\\\screens\\\\Comment.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from \"react\";\nimport { FontAwesome5, MaterialIcons, MaterialCommunityIcons } from '@expo/vector-icons';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { connect } from \"react-redux\";\nimport itinerariesActions from \"../redux/actions/itinerariesActions\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\n\nvar Activity = function Activity(_ref) {\n  var commentInfo = _ref.commentInfo,\n      userLogged = _ref.userLogged,\n      setCommentState = _ref.setCommentState,\n      itineraryId = _ref.itineraryId,\n      editOrRemoveComment = _ref.editOrRemoveComment,\n      props = _ref.props;\n\n  var _useState = useState({\n    comment: commentInfo.comment,\n    editing: false\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      editingComment = _useState2[0],\n      setEditComment = _useState2[1];\n\n  var _useState3 = useState({\n    userLS: {}\n  }),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userLS = _useState4[0],\n      setUserLS = _useState4[1];\n\n  var commentId = commentInfo._id;\n\n  var getData = function getData() {\n    var jsonValue, userData, userLS;\n    return _regeneratorRuntime.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('userLogged'));\n\n          case 2:\n            jsonValue = _context.sent;\n            userData = JSON.parse(jsonValue);\n            _context.t0 = _objectSpread;\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(AsyncStorage.getItem('token'));\n\n          case 7:\n            _context.t1 = _context.sent;\n            _context.t2 = {\n              token: _context.t1\n            };\n            _context.t3 = userData;\n            userLS = (0, _context.t0)(_context.t2, _context.t3);\n            setUserLS({\n              userLS: userLS\n            });\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var enterToSend = function enterToSend(e) {\n    e.key === 'Enter' && send();\n  };\n\n  useEffect(function () {\n    getData();\n    setEditComment(_objectSpread(_objectSpread({}, editingComment), {}, {\n      editing: false\n    }));\n  }, [commentInfo]);\n\n  var editOrRemove = function editOrRemove() {\n    var editedComment,\n        commentId,\n        itineraryId,\n        sendData,\n        respuesta,\n        _args2 = arguments;\n    return _regeneratorRuntime.async(function editOrRemove$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            editedComment = _args2.length > 0 && _args2[0] !== undefined ? _args2[0] : null;\n            commentId = _args2.length > 1 ? _args2[1] : undefined;\n            itineraryId = _args2.length > 2 ? _args2[2] : undefined;\n            sendData = {\n              editedComment: editedComment,\n              commentId: commentId\n            };\n            _context2.next = 6;\n            return _regeneratorRuntime.awrap(editOrRemoveComment(sendData, itineraryId, props, userLS.userLS));\n\n          case 6:\n            respuesta = _context2.sent;\n            setCommentState({\n              comments: respuesta\n            });\n\n          case 8:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var options = function options(e) {\n    return Alert.alert(\"Want to modify your comment?\", \"What option do you prefer?\", [{\n      text: 'Edit',\n      onPress: function onPress() {\n        return editComment();\n      }\n    }, {\n      text: 'Delete',\n      onPress: function onPress() {\n        return Alert.alert(\"Your comment will be deleted...\", \"Are you sure?\", [{\n          text: 'Yes',\n          onPress: function onPress() {\n            editOrRemove(null, commentId, itineraryId);\n            return Alert.alert('Poof! Your comment has been deleted!');\n          }\n        }, {\n          text: 'No'\n        }]);\n      }\n    }, {\n      text: 'Cancel'\n    }]);\n  };\n\n  var editComment = function editComment() {\n    setEditComment(_objectSpread(_objectSpread({}, editingComment), {}, {\n      editing: true\n    }));\n  };\n\n  var readComment = function readComment(text, name) {\n    setEditComment(_objectSpread(_objectSpread({}, editingComment), {}, {\n      comment: text\n    }));\n  };\n\n  var send = function send() {\n    if (editingComment.comment !== \"\") {\n      var comment = editingComment.comment;\n      editOrRemove(comment, commentInfo, itineraryId);\n    } else {\n      Alert.alert(\"You cannot send an empty comment\", \"Write something!\");\n    }\n  };\n\n  return React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      width: '100%',\n      alignItems: 'center',\n      justifyContent: 'flex-start',\n      marginVertical: 3,\n      backgroundColor: '#e2ceb5',\n      borderRadius: 50\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, React.createElement(Image, {\n    style: {\n      width: 50,\n      height: 50,\n      borderRadius: 100,\n      marginLeft: 5\n    },\n    source: {\n      uri: commentInfo.img\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }), React.createElement(View, {\n    style: {\n      width: '78%',\n      marginHorizontal: 10,\n      marginVertical: 3\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 15,\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, commentInfo.firstName, \" \", commentInfo.lastName, \":\"), !editingComment.editing ? React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      alignItems: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 27\n    }\n  }, React.createElement(Text, {\n    style: {\n      marginLeft: 15\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 31\n    }\n  }, commentInfo.comment), !editingComment.editing && userLogged && userLogged.id === commentInfo.userId ? React.createElement(MaterialIcons, {\n    name: \"more-vert\",\n    size: 24,\n    color: \"black\",\n    style: {\n      top: -10\n    },\n    className: commentInfo.comment,\n    onPress: function onPress(e) {\n      return options(e.target);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 33\n    }\n  }) : null) : React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'space-between',\n      minWidth: '98%',\n      maxWidth: '98%'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 26\n    }\n  }, React.createElement(TextInput, {\n    style: {\n      width: '75%'\n    },\n    onKeyPress: function onKeyPress(e) {\n      return enterToSend(e);\n    },\n    name: \"comment\",\n    onChangeText: function onChangeText(text) {\n      var name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'comment';\n      return readComment(text, name);\n    },\n    type: \"text\",\n    value: editingComment.comment,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 31\n    }\n  }), React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      alignItems: 'center',\n      justifyContent: 'center',\n      width: 80,\n      marginRight: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 31\n    }\n  }, React.createElement(FontAwesome5, {\n    name: \"edit\",\n    size: 24,\n    color: \"black\",\n    onPress: function onPress() {\n      return send();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 35\n    }\n  }), React.createElement(MaterialCommunityIcons, {\n    name: \"cancel\",\n    size: 24,\n    color: \"black\",\n    onPress: function onPress() {\n      return setEditComment(_objectSpread(_objectSpread({}, editingComment), {}, {\n        editing: false\n      }));\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 35\n    }\n  }))))));\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userLogged: state.loginReducer.userLogged\n  };\n};\n\nvar mapDispatchToProps = {\n  editOrRemoveComment: itinerariesActions.editOrRemoveComment\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Activity);","map":{"version":3,"sources":["C:/Users/Craig133Mhz/Desktop/programacion/REACT NATIVE/MyTinerary Mobile/screens/Comment.js"],"names":["React","useEffect","useState","FontAwesome5","MaterialIcons","MaterialCommunityIcons","connect","itinerariesActions","AsyncStorage","Activity","commentInfo","userLogged","setCommentState","itineraryId","editOrRemoveComment","props","comment","editing","editingComment","setEditComment","userLS","setUserLS","commentId","_id","getData","getItem","jsonValue","userData","JSON","parse","token","enterToSend","e","key","send","editOrRemove","editedComment","sendData","respuesta","comments","options","Alert","alert","text","onPress","editComment","readComment","name","flexDirection","width","alignItems","justifyContent","marginVertical","backgroundColor","borderRadius","height","marginLeft","uri","img","marginHorizontal","fontSize","fontWeight","firstName","lastName","id","userId","top","target","minWidth","maxWidth","marginRight","mapStateToProps","state","loginReducer","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { FontAwesome5, MaterialIcons, MaterialCommunityIcons } from '@expo/vector-icons';\r\nimport { Alert, Image, ScrollView, Text, TextInput, View } from \"react-native\";\r\nimport { connect } from \"react-redux\";\r\nimport itinerariesActions from \"../redux/actions/itinerariesActions\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\n\r\n\r\nconst Activity = ({commentInfo, userLogged, setCommentState, itineraryId, editOrRemoveComment, props}) =>{ \r\n\r\n    const[editingComment, setEditComment]= useState({comment: commentInfo.comment , editing : false})\r\n    const [userLS, setUserLS] = useState({ userLS:{}})\r\n\r\n\r\n    var commentId = commentInfo._id    \r\n    \r\n    const getData = async () => {\r\n              const jsonValue = await AsyncStorage.getItem('userLogged')\r\n              const userData = JSON.parse(jsonValue) \r\n              let userLS= {\r\n              token: await AsyncStorage.getItem('token'),\r\n              ...userData\r\n              }\r\n              setUserLS({userLS:userLS}) \r\n    }\r\n\r\n\r\n    const enterToSend = ((e) =>{\r\n      e.key === 'Enter' && send()    \r\n    })\r\n\r\n    useEffect(()=> {\r\n      getData()\r\n      setEditComment({...editingComment,\r\n        editing:false})\r\n         // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    },[commentInfo])\r\n\r\n    const editOrRemove = async (editedComment= null , commentId, itineraryId) =>{\r\n      var sendData = {editedComment, commentId} \r\n      const respuesta = await editOrRemoveComment(sendData, itineraryId, props, userLS.userLS)\r\n      setCommentState({comments: respuesta})\r\n    }\r\n    \r\n    const options = (e)=> Alert.alert(\r\n      \"Want to modify your comment?\",\r\n      `What option do you prefer?`,\r\n      [\r\n          {text: 'Edit', onPress: () => editComment()},\r\n          {text: 'Delete', onPress: () => Alert.alert(\"Your comment will be deleted...\", \"Are you sure?\", [\r\n                {text: 'Yes', onPress: () => {\r\n                  editOrRemove(null, commentId, itineraryId)\r\n                  return Alert.alert('Poof! Your comment has been deleted!')\r\n                }},\r\n              {text: 'No'},\r\n          ]) \r\n          },\r\n          {text: 'Cancel'},\r\n      ]\r\n  )\r\n\r\n\r\n    const editComment = (() => {\r\n      setEditComment({...editingComment, editing:true})\r\n    })\r\n\r\n    const readComment = ((text,name) => {\r\n      setEditComment({\r\n        ...editingComment,\r\n        comment : text\r\n      })\r\n    })\r\n\r\n    const send = (() => {\r\n        if (editingComment.comment !== \"\") {\r\n          var comment = editingComment.comment\r\n          editOrRemove(comment, commentInfo, itineraryId)\r\n        } else {\r\n           Alert.alert(\"You cannot send an empty comment\", \"Write something!\")\r\n        }        \r\n    })\r\n    \r\n\r\n    return(\r\n        <View >\r\n            <View style={{flexDirection:'row',width:'100%', alignItems:'center', justifyContent:'flex-start', marginVertical:3,backgroundColor:'#e2ceb5', borderRadius:50}}>            \r\n                <Image style={{width:50, height:50, borderRadius:100, marginLeft:5}} source={{uri: commentInfo.img}}/>\r\n                    <View style={{width:'78%', marginHorizontal:10, marginVertical:3}}>\r\n                        <Text style={{fontSize:15, fontWeight:'bold'}}>{commentInfo.firstName} {commentInfo.lastName}:</Text>\r\n                        {!editingComment.editing \r\n                        ? <View style={{flexDirection:'row', justifyContent:'space-between', alignItems:'center'}}>\r\n                              <Text style={{marginLeft:15}}>{commentInfo.comment}</Text> \r\n                              {!editingComment.editing && userLogged && userLogged.id === commentInfo.userId ?\r\n                                <MaterialIcons name=\"more-vert\" size={24} color=\"black\"  style={{top:-10}}  className={commentInfo.comment} onPress={(e) => options(e.target)}/>\r\n                                : null } \r\n                          </View>\r\n                        :<View style={{flexDirection:'row', alignItems:'center', justifyContent:'space-between', minWidth:'98%', maxWidth:'98%'}}> \r\n                              <TextInput style={{width:'75%'}} onKeyPress={(e)=> enterToSend(e)} name =\"comment\" onChangeText={(text, name='comment')=> readComment(text, name)} type=\"text\" value={editingComment.comment} ></TextInput>\r\n                              <View style={{flexDirection:'row', alignItems:'center', justifyContent:'center', width:80, marginRight:10}}>\r\n                                  <FontAwesome5 name=\"edit\" size={24} color=\"black\" onPress={() => send()} /> \r\n                                  <MaterialCommunityIcons name=\"cancel\" size={24} color=\"black\" onPress={() => setEditComment({...editingComment, editing:false})} /> \r\n                              </View> \r\n                        </View> } \r\n                    </View>                                \r\n\r\n            </View> \r\n        </View> \r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        userLogged: state.loginReducer.userLogged,\r\n    }\r\n  }\r\nconst mapDispatchToProps = {\r\n  editOrRemoveComment: itinerariesActions.editOrRemoveComment,\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Activity)\r\n"]},"metadata":{},"sourceType":"module"}